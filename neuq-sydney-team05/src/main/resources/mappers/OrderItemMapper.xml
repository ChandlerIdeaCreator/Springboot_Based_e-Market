<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.school_mall.repository.OrderItemMapper">
  
  <resultMap id="BaseResultMap" type="com.school_mall.entity.OrderItem">
    <id column="id" property="id" jdbcType="BIGINT"/>
    <result column="order_id" property="orderId" jdbcType="BIGINT"/>
    <result column="product_id" property="productId" jdbcType="BIGINT"/>
    <result column="style_id" property="styleId" jdbcType="BIGINT"/>
    <result column="product_name" property="productName" jdbcType="VARCHAR"/>
    <result column="product_img" property="productImg" jdbcType="VARCHAR"/>
    <result column="style_name" property="styleName" jdbcType="VARCHAR"/>
    <result column="product_count" property="productCount" jdbcType="INTEGER"/>
    <result column="unit_price" property="unitPrice" jdbcType="DECIMAL"/>
    <result column="total_amount" property="totalAmount" jdbcType="DECIMAL"/>
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
  </resultMap>
  
  <sql id="Base_Column_List">
    id, order_id, product_id, style_id, product_name, product_img, style_name,
    product_count, unit_price, total_amount, create_time, update_time
  </sql>

  <select id="selectById" parameterType="long" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List"/>
    FROM order_item
    WHERE id = #{id}
  </select>

  <select id="selectAll" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List"/>
    FROM order_item
  </select>

  <select id="selectByOrderId" parameterType="long" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List"/>
    FROM order_item
    WHERE order_id = #{orderId}
  </select>

  <insert id="insert" parameterType="com.school_mall.entity.OrderItem" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO order_item (
      order_id, product_id, style_id, product_name, product_img, style_name,
      product_count, unit_price, total_amount, create_time, update_time
    )
    VALUES (
      #{orderId}, #{productId}, #{styleId}, #{productName}, #{productImg}, #{styleName},
      #{productCount}, #{unitPrice}, #{totalAmount}, #{createTime}, #{updateTime}
    )
  </insert>

  <insert id="insertSelective" parameterType="com.school_mall.entity.OrderItem" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO order_item
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="orderId != null">order_id,</if>
      <if test="productId != null">product_id,</if>
      <if test="styleId != null">style_id,</if>
      <if test="productName != null">product_name,</if>
      <if test="productImg != null">product_img,</if>
      <if test="styleName != null">style_name,</if>
      <if test="productCount != null">product_count,</if>
      <if test="unitPrice != null">unit_price,</if>
      <if test="totalAmount != null">total_amount,</if>
      <if test="createTime != null">create_time,</if>
      <if test="updateTime != null">update_time,</if>
    </trim>
    <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
      <if test="orderId != null">#{orderId},</if>
      <if test="productId != null">#{productId},</if>
      <if test="styleId != null">#{styleId},</if>
      <if test="productName != null">#{productName},</if>
      <if test="productImg != null">#{productImg},</if>
      <if test="styleName != null">#{styleName},</if>
      <if test="productCount != null">#{productCount},</if>
      <if test="unitPrice != null">#{unitPrice},</if>
      <if test="totalAmount != null">#{totalAmount},</if>
      <if test="createTime != null">#{createTime},</if>
      <if test="updateTime != null">#{updateTime},</if>
    </trim>
  </insert>

  <update id="updateById" parameterType="com.school_mall.entity.OrderItem">
    UPDATE order_item
    SET order_id = #{orderId}, product_id = #{productId}, style_id = #{styleId},
        product_name = #{productName}, product_img = #{productImg}, style_name = #{styleName},
        product_count = #{productCount}, unit_price = #{unitPrice}, total_amount = #{totalAmount},
        create_time = #{createTime}, update_time = #{updateTime}
    WHERE id = #{id}
  </update>

  <update id="updateByIdSelective" parameterType="com.school_mall.entity.OrderItem">
    UPDATE order_item
    <set>
      <if test="orderId != null">order_id = #{orderId},</if>
      <if test="productId != null">product_id = #{productId},</if>
      <if test="styleId != null">style_id = #{styleId},</if>
      <if test="productName != null">product_name = #{productName},</if>
      <if test="productImg != null">product_img = #{productImg},</if>
      <if test="styleName != null">style_name = #{styleName},</if>
      <if test="productCount != null">product_count = #{productCount},</if>
      <if test="unitPrice != null">unit_price = #{unitPrice},</if>
      <if test="totalAmount != null">total_amount = #{totalAmount},</if>
      <if test="createTime != null">create_time = #{createTime},</if>
      <if test="updateTime != null">update_time = #{updateTime},</if>
    </set>
    WHERE id = #{id}
  </update>

  <insert id="batchInsert" parameterType="list">
    INSERT INTO order_item (
      order_id, product_id, style_id, product_name, product_img, style_name,
      product_count, unit_price, total_amount, create_time, update_time
    ) VALUES
    <foreach collection="list" item="item" separator=",">
      (
        #{item.orderId}, #{item.productId}, #{item.styleId}, #{item.productName}, #{item.productImg}, #{item.styleName},
        #{item.productCount}, #{item.unitPrice}, #{item.totalAmount}, #{item.createTime}, #{item.updateTime}
      )
    </foreach>
  </insert>

  <delete id="deleteById" parameterType="long">
    DELETE FROM order_item WHERE id = #{id}
  </delete>

</mapper> 